# --- GENERAL SETTINGS ---
set -g default-command "/bin/zsh -l"
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on
set -g mouse on
set -g status-interval 1
set -g escape-time 0
set -g history-limit 10000

# Force the tmux prefix to Ctrl-b
set -g prefix C-b
bind-key C-b send-prefix

# --- THEME / UI (High Contrast B&W) ---
set -g status-position bottom
set -g status-style "bg=#ffffff,fg=#000000"

# Left status: Empty (Isolation is visual via panes)
set -g status-left ""
set -g status-left-length 0

# Window Status (The "Tabs")
set -g window-status-separator " "
set -g window-status-format "#[fg=#999999] #I:#W "
set -g window-status-current-format "#[bg=#005eff,fg=#ffffff,bold] #I:#W "

# Right status: Empty (Minimalist)
set -g status-right ""

# --- NAVIGATION ---
# Use Vi keys in copy mode
setw -g mode-keys vi
bind-key -T copy-mode-vi v send -X begin-selection
bind-key -T copy-mode-vi y send -X copy-selection-and-cancel

# Navigation between panes (if user splits inside tmux, though we prefer Ghostty splits)
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# --- KEYBINDINGS ---
# Unbind defaults that conflict with our new setup
unbind t    # Default: clock
unbind w    # Default: choose-window

# New window (tab)
bind t new-window -c "#{pane_current_path}"
# Close window (tab)
bind d kill-window
# Close entire session (pane)
bind w kill-session

# Global (no-prefix) Kill Tab: CTRL+D
bind-key -n C-d kill-window

# Global (no-prefix) Clear Screen: CTRL+/ (which often sends C-_)
bind-key -n C-_ send-keys C-l

# --- PLUGINS ---
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

# Automatic restore and save
set -g @continuum-restore 'on'
set -g @continuum-save-interval '1' # Save state every minute
set -g @resurrect-strategy-nvim 'session' # Restore Neovim sessions
set -g @resurrect-capture-pane-contents 'on' # Save exactly what was on screen

# Ensure plugins are loaded immediately
run-shell ~/.tmux/plugins/tmux-resurrect/resurrect.tmux
run-shell ~/.tmux/plugins/tmux-continuum/continuum.tmux

run '~/.tmux/plugins/tpm/tpm'
